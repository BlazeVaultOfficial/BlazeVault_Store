// Function to show the popup modal
function showModal() {
    document.querySelector('.modal').style.display = 'block';
    document.querySelector('.modal-overlay').style.display = 'block';
    startCountdown(); // Start the countdown when the modal is shown
}

// Function to hide the popup modal
function hideModal() {
    document.querySelector('.modal').style.display = 'none';
    document.querySelector('.modal-overlay').style.display = 'none';
}

// Countdown timer logic
let countdownTimer;
let countdownTime = 10; // Countdown starts at 10 seconds

function startCountdown() {
    const timerElement = document.querySelector('.timer');
    countdownTimer = setInterval(() => {
        if (countdownTime <= 0) {
            clearInterval(countdownTimer);
        } else {
            timerElement.textContent = `Try again in: ${countdownTime--}s`;
        }
    }, 1000);
}

// Function to check the access code
function checkAccessCode() {
    const enteredCode = document.querySelector('.input-bar').value;
    const errorMessage = document.querySelector('.error-message');

    if (enteredCode === '3333') {
        hideModal();
    } else {
        errorMessage.textContent = 'Invalid Code. Please try again.';
        // Refresh the page after a short delay (2 seconds)
        setTimeout(() => {
            location.reload();
        }, 2000); // 2 seconds delay
    }
}

// Attach the check access button functionality
document.addEventListener('DOMContentLoaded', () => {
    // Removed showModal() here to prevent popup on page load
    document.querySelector('.access-button').addEventListener('click', checkAccessCode);
});

// Function to highlight the clicked item and show its buy button
function highlightItem(item) {
    // Remove highlight from all items
    const allItems = document.querySelectorAll('.item');
    allItems.forEach(i => i.classList.remove('highlight'));

    // Hide all buy buttons
    const buyButtons = document.querySelectorAll('.buy-button');
    buyButtons.forEach(button => button.style.display = 'none');

    // Highlight the clicked item and show its associated buy button
    item.classList.add('highlight');
    const buyButton = item.closest('.section, .special-section').querySelector('.buy-button');
    buyButton.style.display = 'block';
}
